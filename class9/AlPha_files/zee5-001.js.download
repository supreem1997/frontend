(function(){try{var rmktHost="//track.hockeycurve.com";var client="zee5";var format="json";var sm="";var smlc="";var sid="";var $=function(x){return document.querySelectorAll(x)};var pagecount=0;var exception=function(e){sendData(JSON.stringify({category:"exception",message:e.stack.toString()}),"exception")};var hash=function(s){return s.split("").reduce(function(a,b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0)};function Mobile(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|tab/i.test(navigator.userAgent.toLowerCase()||navigator.vendor.toLowerCase()||window.opera.substr(0,4).toLowerCase())}function readcookie(key){try{var pairs=document.cookie.split("; ");for(var i=0;i<pairs.length;i++){var parts=pairs[i].split("=");if(parts.length==2){if(parts[0]==key)return parts[1]}}return null}catch(e){exception(e)}}function setcookie(key,val,days){try{if(!days){days=365}var now=new Date;var time=now.getTime();var expireTime=time+24*3600*1e3*days;now.setTime(expireTime);document.cookie=key+"="+val+";expires="+now.toGMTString()+";path=/;domain=.zee5.com"}catch(e){exception(e)}}function guid(){function s4(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return s4()+s4()+s4()+s4()}function getSources(){var url_params=params();var utm_source=url_params["utm_source"]||"";var utm_medium=url_params["utm_medium"]||"";if(utm_source==""&&utm_medium==""){if(url_params["gclid"]){sm="google-cpc"}else if(document.referrer.substr(0,30).indexOf("google.")!=-1){sm="google-organic"}}else{sm=utm_source.toLowerCase().replace(/[^a-z0-9]/g,"").substr(0,10)+"-"+utm_medium.toLowerCase().replace(/[^a-zA-Z0-9]/g,"").substr(0,10)}if(sm==""){sm=readcookie("hcsm")||""}else{setcookie("hcsid",guid(),1/48);setcookie("hcsm",sm,1/48);setcookie("hcsmlc",sm,30)}if(!readcookie("hcsid")){setcookie("hcsid",guid(),1/48)}sm=readcookie("hcsm")||"direct-none";smlc=readcookie("hcsmlc")||"direct-none";sid=readcookie("hcsid")}var sendData=function(data,category,ctype){if(Mobile()){device="mobile"}else{device="desktop"}if(!category){category="pageview"}if(!ctype){ctype="default"}src=rmktHost+"/data_get?data="+encodeURIComponent(data)+"&client="+encodeURIComponent(client)+"&format="+format+"&sm="+encodeURIComponent(sm)+"&smlc="+encodeURIComponent(smlc)+"&category="+encodeURIComponent(category)+"&device="+device+"&ctype="+encodeURIComponent(ctype)+"&sid="+sid;var body=document.getElementsByTagName("body")[0];var img=document.createElement("img");img.src=src;img.style["width"]="1px";img.style["height"]="1px";img.style["display"]="none";body.appendChild(img)};var pagetype=function(){try{if(window.location.href.indexOf("!product/")!=-1&&window.location.href.indexOf("m.shop")==-1){var breadcrumblist=$("#breadcrumb li");var breadcrumb="";if(breadcrumblist.length>0){for(var i=0;i<breadcrumblist.length-1;i++){breadcrumb+=","+breadcrumblist[i].textContent.replace(/[^a-zA-Z0-9]/g,"").trim()}}var price=parseInt($("#currentPrice span")[0].textContent.replace(/[^0-9\.]/g,""));var mrp=price;var status="active";if($(".out-of-stock-add:not(.hide)").length>0){status="inactive"}var imageurl=$("#productMainImage img")[0].src;var heading=$("#productName")[0].textContent.trim();obj={pagetype:"product",breadcrumb:breadcrumb,image:imageurl,heading:heading,price:price,status:status,mrp:mrp,id:window.location.href.split("?")[0].replace(/.*\//,"")};$("#addToBagBtn")[0].onclick=function(){data={};data["category"]="addtocart";data["id"]=window.location.href.split("?")[0].replace(/.*\//,"");sendData(JSON.stringify(data),"addtocart","default")};return obj}else if(window.location.href.indexOf("!product/")!=-1&&window.location.href.indexOf("m.shop")!=-1){obj={pagetype:"product",id:window.location.href.split("?")[0].replace(/.*\//,"")};$("#addToBagBtn")[0].onclick=function(){data={};data["category"]="addtocart";data["id"]=window.location.href.split("?")[0].replace(/.*\//,"");sendData(JSON.stringify(data),"addtocart","default")};return obj}else{return null}}catch(e){return"error"}};var trigger_iframe=function(src){try{var body=document.getElementsByTagName("body")[0];var iframe=document.createElement("img");iframe.src=src;iframe.style["display"]="none";body.appendChild(iframe)}catch(e){exception(e)}};var params=function(){try{var params={};var url=window.location.href;if(url.split("?").length>1){parts=url.split("?")[1].split("&");for(var i=0;i<parts.length;i++){var pair=parts[i].split("=");if(pair.length>1){params[pair[0]]=pair[1]}}}return params}catch(e){exception(e)}};var triggercart=function(amount){try{var cart=$("#cart_total_items");var presentcartval=0;if(cart.length>0){presentcartval=parseInt(cart[0].innerHTML)}if(amount!="none"&&presentcartval>amount){}else{setTimeout(function(){triggercart(presentcartval)},1e3,presentcartval)}}catch(e){}};var track=function(){data={};data["category"]="pageview";data["url"]=window.location.href;var extradetails=pagetype()||{};if(extradetails=="error"){return}for(var key in extradetails){data[key]=extradetails[key]}var ctype=extradetails["pagetype"]||"default";sendData(JSON.stringify(data),"pageview",ctype);if(window.location.href.toLowerCase().indexOf("/checkout")!=-1&&window.location.href.indexOf("complete_payment")!=-1){data={};data["category"]="conversion";sendData(JSON.stringify(data),"conversion","default")}};var run=function(){if(["interactive","complete"].indexOf(document.readyState)==-1){setTimeout(run,1e3)}else{setTimeout(function(){getSources();track()},5e3)}};run()}catch(e){exception(e)}})();
